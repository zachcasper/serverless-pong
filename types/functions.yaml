namespace: Radius.Compute
types:
  functions:
    description: |
      The `Radius.Compute/functions` Resource Type deploys a serverless function packaged as a container image. Te container image must be stored in the target platform's OCI registry. AWS Lambda required container images to be stored in ECR and Azure Functions requires container images to be stored in Azure Container registry.
      
      Add the Radius.Compute/functions Resource Type to an application defintiion Bicep file:

      ```
      extension radius
      extension functions

      param environment string

      resource myApp 'Applications.Core/applications@2023-10-01-preview' = {
        name: 'my-app'
        properties: {
          environment: environment
        }
      }

      resource myFunction 'Radius.Compute/functions@2025-12-08-preview' = {
        name: 'my-function'
        properties: {
          application: myApp.id
          environment: environment
          image: '123456789012.dkr.ecr.us-east-2.amazonaws.com/my-function:v1'
        }
      }
      ```

      After deployment, the function's URL can be retrieved via `rad resource show Radius.Compute/functions my-function -o json`.

      Environment variables can automatically be created based on connected resources such as a Redis cache. For example, add a Redis cache resource and a connection to the function.

      ```         
      resource myFunction 'Radius.Compute/functions@2025-12-08-preview' = {
        name: 'my-function'
        properties: {
          application: myApp.id
          environment: environment
          image: '123456789012.dkr.ecr.us-east-2.amazonaws.com/my-function:v1'
          connections: {
            redis: {
              source: redis.id
            }
          }
        }
      }

      resource redis 'Radius.Data/redisCaches@2025-12-08-preview' = {
        name: 'redis'
        properties: {
          application: pongApp.id
          environment: environment
          capacity: 'S'
        }
      }
      ```
      
    apiVersions:
      '2025-12-08-preview':
        schema:
          type: object
          properties:
            environment:
              type: string
              description: (Required) The Radius Environment ID. Typically set by the rad CLI (e.g., `environment`).
            application:
              type: string
              description: (Required) The Radius Application ID. For example, `myApp.id`.
            image:
              type: string
              description: (Required) Container image URI for the function (public or authenticated as supported by your runtime).
            connections:
              type: object
              description: (Required) A connection to another resource. Environment variables will be created for each property on the connected resource.
              additionalProperties:
                type: object
                properties:
                  source:
                    type: string
                    description: (Required) The resource ID of the Secret resource.
                  disableDefaultEnvVars:
                    type: boolean
                    description: (Optional) Disables the automatic injection of environment variables from connected resource properties.
                required: [source]
            url:
              type: string
              readOnly: true
              description: "(Read-only) The URL of the function."
          required: [environment, application, image]